<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AryanzUtama Store</title>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>
:root{
--primary:#ff7a18;
--secondary:#ffb347;
--danger:#ff3b3b;
--soft:#f4f6fb;
--dark:#111;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui}

body{background:var(--soft);color:#222}

/* ================= BANNER ================= */
.banner{
height:240px;
background:linear-gradient(to bottom,rgba(0,0,0,.3),#fff),
url("https://res.cloudinary.com/dtdodhqqi/image/upload/v1766772767/IMG-20251128-WA0091_ldbe9l.jpg");
background-size:cover;
display:flex;
flex-direction:column;
align-items:center;
justify-content:flex-end;
padding-bottom:20px;
}

.logo{
width:120px;
height:120px;
border-radius:50%;
background:#fff;
padding:6px;
margin-bottom:10px;
box-shadow:0 20px 40px rgba(0,0,0,.3);
}

.logo img{width:100%;height:100%;border-radius:50%}

.banner h1{font-size:22px;font-weight:900}

/* ================= HOME ================= */
#homeMenu{
padding:20px;
display:flex;
gap:16px;
}

.home-card{
flex:1;
background:#fff;
border-radius:20px;
padding:22px;
box-shadow:0 15px 35px rgba(0,0,0,.15);
cursor:pointer;
transition:.3s;
}

.home-card:hover{transform:translateY(-6px)}

.home-card h2{margin-bottom:6px}

/* ================= FILTER ================= */
#filterBar{
display:none;
position:sticky;
top:0;
background:#fff;
padding:12px;
box-shadow:0 10px 25px rgba(0,0,0,.1);
z-index:10;
}

#filterBar input,#filterBar select{
width:100%;
padding:12px;
margin-bottom:8px;
border-radius:14px;
border:1px solid #ddd;
}

/* ================= PRODUCTS ================= */
#products{
display:none;
padding:16px;
display:grid;
grid-template-columns:repeat(2,1fr);
gap:14px;
}

.card{
background:#fff;
border-radius:18px;
overflow:hidden;
position:relative;
box-shadow:0 10px 30px rgba(0,0,0,.15);
animation:fade .4s ease;
}

@keyframes fade{
from{opacity:0;transform:translateY(20px)}
}

.card img{
width:100%;
height:160px;
object-fit:cover;
}

.info{text-align:center;padding:10px;font-weight:800}

.sold{
position:absolute;
inset:0;
background:rgba(0,0,0,.75);
display:flex;
align-items:center;
justify-content:center;
color:#fff;
font-size:26px;
font-weight:900;
}

.admin-btn{
position:absolute;
bottom:10px;
left:50%;
transform:translateX(-50%);
padding:6px 18px;
border:none;
border-radius:20px;
background:var(--danger);
color:#fff;
display:none;
}

/* ================= ADMIN LOGIN POPUP ================= */
#loginPopup{
position:fixed;
bottom:20px;
left:20px;
background:#fff;
padding:16px;
border-radius:18px;
box-shadow:0 15px 40px rgba(0,0,0,.35);
display:none;
animation:slideUp .4s ease;
z-index:200;
}

@keyframes slideUp{
from{opacity:0;transform:translateY(40px)}
}

/* ================= ADMIN PANEL ================= */
#adminPanel{
position:fixed;
bottom:-100%;
left:0;
right:0;
background:#fff;
padding:16px;
border-radius:22px 22px 0 0;
box-shadow:0 -15px 40px rgba(0,0,0,.4);
transition:.4s;
z-index:150;
}

#adminPanel.show{bottom:0}

#adminPanel input,#adminPanel select{
width:100%;
padding:12px;
margin-bottom:8px;
border-radius:14px;
border:1px solid #ddd;
}

#adminPanel button{
width:100%;
padding:14px;
border:none;
border-radius:16px;
background:linear-gradient(90deg,var(--primary),var(--secondary));
color:#fff;
font-weight:900;
}
</style>
</head>

<body>

<div class="banner">
<div class="logo">
<img src="https://res.cloudinary.com/dtdodhqqi/image/upload/v1766845910/IMG-20251128-WA0094_1_rrrhdn.jpg">
</div>
<h1>AryanzUtama Store</h1>
</div>

<div id="homeMenu">
<div class="home-card" onclick="openBuyer()">
<h2>ðŸ›’ Beli Akun</h2>
<p>Lihat semua akun tersedia</p>
</div>
<div class="home-card" onclick="openAdmin()">
<h2>âž• Jual Akun</h2>
<p>Khusus admin</p>
</div>
</div>

<div id="filterBar">
<input id="searchInput" placeholder="Cari kategori">
<select id="filterKategori">
<option value="">Semua</option>
<option>Ahli</option>
<option>Senior</option>
<option>Ternama</option>
<option>Terhormat</option>
</select>
</div>

<section id="products"></section>

<!-- LOGIN POPUP -->
<div id="loginPopup">
<input id="pin" type="password" placeholder="PIN Admin">
<button onclick="loginAdmin()">LOGIN</button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel">
<input type="file" id="file">
<select id="kategori">
<option>Ahli</option>
<option>Senior</option>
<option>Ternama</option>
<option>Terhormat</option>
</select>
<button onclick="uploadProduct()">UPLOAD</button>
</div>

<script>
const ADMIN_PIN="009898";
const SUPABASE_URL="ISI_SUPABASE_URL";
const SUPABASE_ANON_KEY="ISI_SUPABASE_ANON_KEY";

const supabase=supabaseJs.createClient(SUPABASE_URL,SUPABASE_ANON_KEY);

let isAdmin=false;
let allProducts=[];

function openBuyer(){
homeMenu.style.display="none";
filterBar.style.display="block";
products.style.display="grid";
loadProducts();
}

function openAdmin(){
loginPopup.style.display="block";
}

function loginAdmin(){
if(pin.value===ADMIN_PIN){
isAdmin=true;
loginPopup.style.display="none";
adminPanel.classList.add("show");
openBuyer();
}else alert("PIN salah");
}

async function loadProducts(){
const {data}=await supabase.from("products").select("*").order("created_at",{ascending:false});
allProducts=data||[];
renderProducts(allProducts);
}

function renderProducts(list){
products.innerHTML="";
list.forEach(d=>{
const c=document.createElement("div");
c.className="card";
c.innerHTML=`
<img src="${d.image_url}">
<div class="info">${d.kategori}</div>
${d.sold?'<div class="sold">SOLD</div>':''}
<button class="admin-btn">SOLD</button>
`;
if(!d.sold)c.onclick=()=>window.open("https://wa.me/6289679520905");
c.querySelector(".admin-btn").onclick=e=>{
e.stopPropagation();
markSold(d.id);
};
products.appendChild(c);
});
if(isAdmin)document.querySelectorAll(".admin-btn").forEach(b=>b.style.display="block");
}

searchInput.oninput=filterData;
filterKategori.onchange=filterData;

function filterData(){
renderProducts(allProducts.filter(p=>
p.kategori.toLowerCase().includes(searchInput.value.toLowerCase()) &&
(filterKategori.value? p.kategori===filterKategori.value:true)
));
}

async function uploadProduct(){
const f=file.files[0];
if(!f)return alert("Pilih foto");
const name=Date.now()+"-"+f.name;
await supabase.storage.from("products").upload(name,f,{upsert:true});
const {data}=supabase.storage.from("products").getPublicUrl(name);
await supabase.from("products").insert({image_url:data.publicUrl,kategori:kategori.value,sold:false});
loadProducts();
}

async function markSold(id){
await supabase.from("products").update({sold:true}).eq("id",id);
loadProducts();
}
</script>

</body>
</html>
